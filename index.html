<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>İstirahat Hesapla</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="İstirahat">
    <link rel="apple-touch-icon" href="https://via.placeholder.com/180/3498db/ffffff?text=C">

    <style>
        :root { --primary: #2c3e50; --accent: #3498db; --bg: #f0f2f5; }
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; padding: 15px; background: var(--bg); color: var(--primary); margin: 0; }
        .card { background: white; padding: 20px; border-radius: 16px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); max-width: 400px; margin: auto; }
        h2 { text-align: center; margin-top: 0; margin-bottom: 20px; font-size: 1.3rem; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        label { font-size: 0.9rem; font-weight: 700; display: block; margin-top: 15px; margin-bottom: 5px; }
        .row { display: flex; gap: 8px; align-items: center; }
        input, select { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 10px; font-size: 16px; box-sizing: border-box; outline: none; transition: border 0.3s; }
        input:focus { border-color: var(--accent); }
        .sep { font-weight: bold; font-size: 1.2rem; }
        .unit { font-size: 0.8rem; color: #7f8c8d; }
        button { width: 100%; padding: 15px; background: var(--accent); color: white; border: none; border-radius: 10px; font-size: 1rem; font-weight: bold; margin-top: 20px; cursor: pointer; -webkit-appearance: none; }
        button:active { opacity: 0.8; }
        .result { margin-top: 25px; border-left: 5px solid var(--accent); padding: 15px; display: none; background: #f8fbff; border-radius: 0 12px 12px 0; }
        .p-rest-box { text-align: center; font-weight: bold; margin-bottom: 15px; color: #16a085; font-size: 1.1rem; border-bottom: 1px solid #d1eaea; padding-bottom: 10px; }
        .step { margin-bottom: 12px; font-size: 0.95rem; display: flex; justify-content: space-between; border-bottom: 1px dashed #eee; padding-bottom: 5px; }
        .step b { color: #2980b9; }
        .gap-text { font-style: italic; font-size: 0.85rem; color: #7f8c8d; margin: 8px 0; text-align: center; background: #f1f1f1; border-radius: 20px; padding: 2px 0; }
    </style>
</head>
<body>

<div class="card">
    <h2>İstirahat Hesaplayıcı</h2>
    
    <label>1. Grup Yatış (Saat : Dakika)</label>
    <div class="row">
        <input type="tel" id="startH" placeholder="05" maxlength="2">
        <span class="sep">:</span>
        <input type="tel" id="startM" placeholder="00" maxlength="2">
    </div>
    
    <label>İniş Saati (Saat : Dakika)</label>
    <div class="row">
        <input type="tel" id="landH" placeholder="12" maxlength="2">
        <span class="sep">:</span>
        <input type="tel" id="landM" placeholder="00" maxlength="2">
    </div>
    
    <label>Servis Süresi</label>
    <div class="row">
        <input type="number" id="servH" value="2">
        <span class="unit">sa</span>
        <input type="number" id="servM" value="30">
        <span class="unit">dk</span>
    </div>
    
    <label>Hazırlık Boşluğu (Gap)</label>
    <select id="gap">
        <option value="10">10 Dakika</option>
        <option value="15" selected>15 Dakika</option>
    </select>
    
    <button onclick="hesapla()">HESAPLA</button>

    <div id="result" class="result">
        <div class="p-rest-box">
            Kişi Başı Dinlenme: <span id="p_rest"></span>
        </div>
        
        <div class="step"><span>Grup 1 Yatış:</span> <b id="r_g1_s"></b></div>
        <div class="step"><span>Grup 1 Kalkış:</span> <b id="r_g1_e"></b></div>
        <div class="gap-text">--- <span id="r_gap1"></span> dk Hazırlık ---</div>
        
        <div class="step"><span>Grup 2 Yatış:</span> <b id="r_g2_s"></b></div>
        <div class="step"><span>Grup 2 Kalkış:</span> <b id="r_g2_e"></b></div>
        <div class="gap-text">--- <span id="r_gap2"></span> dk Hazırlık ---</div>
        
        <div class="step"><span>Servis Başlangıç:</span> <b id="r_serv"></b></div>
        <div class="step"><span>İniş:</span> <b id="r_land"></b></div>
    </div>
</div>

<script>
// Saat formatlama fonksiyonu
function formatTime(totalMin) {
    totalMin = (totalMin + 1440) % 1440;
    let h = Math.floor(totalMin / 60).toString().padStart(2, '0');
    let m = (totalMin % 60).toString().padStart(2, '0');
    return h + ":" + m;
}

function hesapla() {
    // Girişleri al
    const sH = parseInt(document.getElementById('startH').value) || 0;
    const sM = parseInt(document.getElementById('startM').value) || 0;
    const lH = parseInt(document.getElementById('landH').value) || 0;
    const lM = parseInt(document.getElementById('landM').value) || 0;
    const svH = parseInt(document.getElementById('servH').value) || 0;
    const svM = parseInt(document.getElementById('servM').value) || 0;
    const gap = parseInt(document.getElementById('gap').value);

    // Dakikaya çevir
    let startTotal = (sH * 60) + sM;
    let landTotal = (lH * 60) + lM;
    const serviceTotalMin = (svH * 60) + svM;

    // Gece yarısı kontrolü (Örn: 23:00 yatış, 05:00 iniş)
    if (landTotal <= startTotal) landTotal += 1440;

    // Geriye doğru matematik
    const serviceStart = landTotal - serviceTotalMin;
    const g2Wake = serviceStart - gap;
    
    // Toplam havuzdan mola payını çıkar ve 2'ye böl (Rounding)
    const totalRestPool = (g2Wake - startTotal) - gap;
    const restPerPerson = Math.floor(totalRestPool / 2);

    // Kişi başı süreyi saat/dakika yap
    const restH = Math.floor(restPerPerson / 60);
    const restM = restPerPerson % 60;
    const restText = restH > 0 ? restH + " sa " + restM + " dk" : restM + " dk";

    // Durakları hesapla
    const g1Wake = startTotal + restPerPerson;
    const g2Start = g1Wake + gap;

    // Ekrana yazdır
    document.getElementById('p_rest').innerText = restText;
    document.getElementById('r_g1_s').innerText = formatTime(startTotal);
    document.getElementById('r_g1_e').innerText = formatTime(g1Wake);
    document.getElementById('r_gap1').innerText = gap;
    document.getElementById('r_g2_s').innerText = formatTime(g2Start);
    document.getElementById('r_g2_e').innerText = formatTime(g2Wake);
    document.getElementById('r_gap2').innerText = gap;
    document.getElementById('r_serv').innerText = formatTime(serviceStart);
    document.getElementById('r_land').innerText = formatTime(landTotal);
    
    // Sonuç panelini göster
    document.getElementById('result').style.display = 'block';
    
    // Mobilde sonucu görmesi için aşağı kaydır
    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
}
</script>
</body>
</html>
